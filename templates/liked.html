<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liked Items | APP</title>
    <link href="static/assets/css/styles.css" rel="stylesheet" />
</head>

<style>
    .card-img-photo {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px 8px 0 0;
        display: block;
    }
</style>

<body>
    <header>
        <nav>
            <div class="logo">
                <span class="logo-icon">üå±</span> 
                Hathor
            </div>
            <div class="nav-links">
                <a href="{{ url_for('home') }}">Home</a>
                <a href="{{ url_for('listings') }}">Browse</a>
                <a href="{{ url_for('how_it_works') }}">How It Works</a>
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('messages') }}">Messages</a>
                {% endif %}
            </div>
            <div class="nav-buttons">
                {% if current_user.is_authenticated %}
                <a href="{{ url_for('sell') }}">
                    <button class="btn" id="sell-btn">Sell Item</button>
                </a>
                    <a href="{{ url_for('liked_items') }}">
                        <button class="btn">Saved</button>
                    </a>
                    <a href="{{ url_for('logout') }}">
                        <button class="btn">Logout</button>
                    </a>
                {% else %}
                    <a href="{{ url_for('signup') }}">
                        <button class="btn">Sign Up</button>
                    </a>
                    <a href="{{ url_for('login') }}">
                        <button class="btn">Login</button>
                    </a>
                {% endif %}
            </div>
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">‚ò∞</button>
        </nav>
    </header>

    <main class="main-container">
        <section>
            <div class="section-header">
                <h2 class="section-title">Liked Items</h2>
            </div>
            <div class="listings-grid" id="liked-items-grid">
                <!-- Liked items will be dynamically added here -->
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
        <div class="footer-section">
        <h3>APP</h3>
        <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 1rem;">Your local marketplace for pre-loved fashion in San Ramon and Danville.</p>
        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
        <a href="#" style="color: white; font-size: 1.2rem;">üì±</a>
        <a href="#" style="color: white; font-size: 1.2rem;">üìò</a>
        <a href="#" style="color: white; font-size: 1.2rem;">üì∏</a>
        <a href="#" style="color: white; font-size: 1.2rem;">üê¶</a>
        </div>
        </div>
        
        <div class="footer-section">
        <h3>Quick Links</h3>
        <ul class="footer-links">
        <li><a href="#">Home</a></li>
        <li><a href="#">Browse Items</a></li>
        <li><a href="#">Sell Items</a></li>
        <li><a href="#">How It Works</a></li>
        <li><a href="#">FAQ</a></li>
        </ul>
        </div>
        
        <div class="footer-section">
        <h3>Categories</h3>
        <ul class="footer-links">
        <li><a href="#">Women's Clothing</a></li>
        <li><a href="#">Men's Clothing</a></li>
        <li><a href="#">Shoes & Accessories</a></li>
        <li><a href="#">Children's</a></li>
        <li><a href="#">Activewear</a></li>
        </ul>
        </div>
        
        <div class="footer-section">
        <h3>Contact Us</h3>
        <ul class="footer-links">
            <li><a href="mailto:vaishnavanand90@gmail.com">vaishnavanand90@gmail.com</a></li>
            <li><a href="mailto:asherburdeny@gmail.com">asherburdeny@gmail.com</a></li>
            <li style="color: rgba(255, 255, 255, 0.7);">San Ramon & Danville, CA</li>
        </ul>
        </div>
        </div>
        
        <div class="footer-bottom">
        <p>&copy; 2025 APP. All rights reserved.</p>
        <p style="margin-top: 0.5rem;">
        <a href="#" style="color: rgba(255, 255, 255, 0.6); margin-right: 1rem;">Privacy Policy</a>
        <a href="#" style="color: rgba(255, 255, 255, 0.6); margin-right: 1rem;">Terms of Service</a>
        <a href="#" style="color: rgba(255, 255, 255, 0.6);">Community Guidelines</a>
        </p>
        </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const likedItemsGrid = document.getElementById('liked-items-grid');
        let likedItems = JSON.parse(localStorage.getItem('likedItems')) || [];
    
        function renderLikedItems() {
            likedItemsGrid.innerHTML = '';
            if (likedItems.length === 0) {
                likedItemsGrid.innerHTML = '<p>No liked items yet.</p>';
                return;
            }
    
            likedItems.forEach(item => {
                const listingCard = document.createElement('div');
                listingCard.classList.add('listing-card', 'animate-fade');
                let imageHtml = '';
                if (item.images && item.images.length > 0 && item.images[0]) {
                    imageHtml = `<img src="/image/${item.images[0]}" alt="${item.title}" class="card-img-photo">`;
                } else {
                    imageHtml = `<img src="/static/default-image.png" alt="No image" class="card-img-photo">`;
                }
                listingCard.innerHTML = `
                    <div class="card-img">
                        <button class="like-btn liked" data-listing-id="${item._id}" aria-label="Unlike Listing">‚ù§Ô∏è</button>
                        ${imageHtml}
                        <div class="card-badge">${item.condition || ''}</div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${item.title}</h3>
                        <p class="card-price">${item.price ? '$' + item.price : ''}</p>
                        <p class="card-location">
                            <span class="material-icons">üìç</span> 
                            <span class="neighborhood-tag">${item.neighborhood || ''}</span>
                        </p>
                        <div class="card-meta">
                            <span>Size: ${item.size || ''}</span>
                        </div>
                        <div class="card-actions">
                            <a href="/listings/${item._id}">
                                <button class="btn message-btn">View Details</button>
                            </a>
                        </div>
                    </div>
                `;
                likedItemsGrid.appendChild(listingCard);
    
                // Unlike functionality
                listingCard.querySelector('.like-btn').addEventListener('click', function () {
                    likedItems = likedItems.filter(liked => liked._id !== item._id);
                    localStorage.setItem('likedItems', JSON.stringify(likedItems));
                    renderLikedItems();
                });
            });
        }
    
        renderLikedItems();
    });
    </script>
</body>
</html>